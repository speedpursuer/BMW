var express = require('express');
var router = express.Router();
const redis = require("redis")
const bluebird = require("bluebird")
const client = redis.createClient()
bluebird.promisifyAll(redis.RedisClient.prototype)
bluebird.promisifyAll(redis.Multi.prototype)


/* GET home page. */
router.get('/', function(req, res, next) {
    res.render('index', {
        title: 'Express',
    });
});

router.get('/data/:symbol', function(req, res) {
    var key = req.params.symbol;
    client.get(key, function (err, reply) {
        var result = []
        if(!err && reply) {
            result = JSON.parse(reply)
        }
        res.json(result)
    })

    // JSON.parse(await client.getAsync(this.key))
    // res.json([
    //     {
    //         pos: [-0.00007462862109774288,-0.00007462862109774288,-0.00007462862109774288,-0.00007169374291728786,-0.00007381110481954889,-0.00007181410381954662,-0.00007081560331954895,-0.00007332762913533561,-0.00007232912863533447,-0.00009229913863533293,-0.000052359118635336016,-0.00005792536749623517,-0.00004993736349623648,-0.00004591327127067418,-0.000019982348496237062,-0.00013221662354135147,-0.00009160312959774486,-0.000059244960703003224,-0.00006763911759774185,-0.0000712495017969883,-0.00007121941157142361,-0.00004217231382706507,-0.000058138291751878846,-0.000059106702026311825,-0.00004907662683834371,-0.00003907664187593682,-0.000054081634357140695,-0.000054081634357140695,-0.000054081634357140695,-0.0000491067170639084,-0.000054081634357140695,0.000036148922033834435,-0.00003907664187593682,-0.00005913679225187998,-0.00006405152909397943,-0.000035031160894736374,-0.00008601854009398016,-0.00011597355509397958,-0.00006299818893232625,-0.00012766804959397915,-0.00014264555709397886,-0.00009571603359398093,-0.000030694599097744885,-0.0000011560276691711946,0.00003569822015414212,-0.00001622380584585803,-0.000015225305345860363,-0.000011201213120294595,-0.000010232802845861616,-0.00006324417319172881,-0.00007413683484586153,-0.00006415182984586057,-0.00006215482884586176,-0.00006015782784586296,-0.000058160826845860686,-0.00004617882084586092,-0.00007332762913533561,-0.00011826015163533127,-0.00006334262413533465,-0.00006134562313533237,-0.00011349896599999534,-0.00005968558054134793,-0.00005768857954134912,-0.00005569157854135032,-0.00009248538531202513,-0.00007547336175563885,-0.00008550343694361043,-0.0000506990760413481,-0.000043356044966160606,-0.00003635302040977395,-0.000140368339124064,-0.00010033075391729235,-0.00009733525241728894,-0.00009134424941729252,-0.00011739686169924893,-0.00009853422412029605,-0.00009354172162029731,-0.00010206074643608412,-0.00009441478103006801,-0.00008608270636090154,-0.00007609770136089711,-0.00007147180462406186,-0.00007310219986089717,-0.00009156204522556624,-0.00008157704022556528,-0.00007958003922556647,-0.00007658453772556653,-0.00007458753672556426,-0.00007259053572556198,-0.00009711521589849184,-0.00007215270339849117,-0.00008109851442856739,-0.00007810301292856744,-0.00008161804626315508,-0.00007364762746991937,-0.00007885323649247516,-0.00012762073869548515,-0.00008145699189097619,-0.00007846149039097625,-0.00007346898789097403,-0.00005980148639097432,-0.00005480898389097211,-0.00004981648139097336,-0.000044823978890974614,-0.0000422542475676628,-0.00003526474406766178,-0.00010369874877067323,-0.00010564458335714233,-0.0001028310821165404,-0.00009584157861653939,-0.00009108979792105121,-0.00010262787536841761,-0.00015493370143608923,-0.00014292160521052477,-0.00014195319493608832,-0.00009791360972932414,-0.00009379924682706084,-0.00009086392577819027,-0.00008989551550375383,-0.00008889701500375269,-0.0000877781536015032,-0.00008366379069924684,-0.00007190752654134824,-0.00006388695737217717,-0.00012081151594737008,-0.00012375934201503888,-0.00011983555054135078,-0.0001158415485413497,-0.00010783100944736917,-0.0001008189708533759,-0.00011386708263533274,-0.00011786355957894151,-0.00011582643827819095,-0.00011187255657894163,-0.00010687002400375581,-0.00008484296285337853,-0.00016362407130075113,-0.00015954982869924653,-0.00014282359713533102,-0.0001287508284774433,-0.00013166608937593624,-0.00013182657057894329,-0.00005906288210901639,-0.00008102989310902059,-0.00006205838360901633,-0.000057065881109021055,-0.00010174986607142805,-0.00008177985607142266,-0.00009253801063157166,-0.00008255300563157417,-0.0000735439660375925,-0.00007656200263157428,-0.00007556350213157662,-0.00006954996403759142,-0.00010449748153758959,-0.000041716635691722154,-0.000040718135191724486,-0.00008754550813157291,-0.00008654700763157525,-0.00008455000663157297,-0.00008357404122556755,-0.00008057853972556761,-0.00007055093948120025,-0.00006755543798119684,-0.00006757549813157099,-0.00016341148598119845,-0.00011244187425563448,-0.0000984929574812006,-0.00010349898103758845,-0.00009950497903759084,-0.00009950497903759084,-0.0000964959564812018,-0.00012734117322931934,-0.00009142073843608836,-0.00009130037753382961,-0.0001271661549323254,-0.00016003643083081776,-0.00010341785469925036,-0.00009338777951127877,-0.00011830522182330189,-0.00011026459250375667,-0.00006115632834586063,-0.00006015782784586296,-0.000018040526093981296,-0.00005616382584586188,-0.00012416901225939525,-0.000019131772214280723,-0.000021341879736836572,-0.000021341879736836572,-0.000016166360939842,-0.00007706923808270191,-0.00012601829767668396,-0.00012503230219548453],
    //         neg: [-0.00017803821622019295,-0.00013294073861512198,-0.00014596025813464267,-0.00014784680443367254,-0.00013584934865416148,-0.00013888376319616882,-0.00013785235165716253,-0.00013970580447266595,-0.00013967589443516712,-0.00012984968744414113,-0.00017291425200870528,-0.00013886320095765278,-0.0001949472850417376,-0.00018393076852521797,-0.00018192776552221693,-0.00019594878654323813,-0.00017712644483118892,-0.00019111728089718158,-0.00019111728089718158,-0.0001651081518956425,-0.0001651081518956425,-0.0001560946383821274,-0.00015700516534409778,-0.0001767158800566014,-0.00021581023808809469,-0.0001998537178366025,-0.00015400163034909667,-0.00015400163034909667,-0.00015400163034909667,-0.00015400163034909667,-0.00015400163034909667,-0.00021867744873257933,-0.00018089075406160088,-0.00018083093398659975,-0.00018085087401159897,-0.00016984564431305957,-0.0001578652200300637,-0.0001578552500175641,-0.0001578652200300637,-0.00014294011131756393,-0.0001279352425050638,-0.00012406909159158597,-0.00023977398058629487,-0.0002849228421947028,-0.00032108940253629953,-0.0002551127797372349,-0.000189058683153151,-0.00018306220538914786,-0.00018302232533914595,-0.00014201961434309046,-0.0001501361740275861,-0.00013001668880258457,-0.00012104208582957438,-0.00013600478827709844,-0.00012999577926808836,-0.0001819677903291267,-0.00014409171284162497,-0.00013119210838963974,-0.00017216366492116622,-0.00016912184159917354,-0.0001602356519331792,-0.0001542716454391857,-0.00014627472590468538,-0.0001482777289076899,-0.00014602803682469898,-0.0001480310398277035,-0.00021131167867469852,-0.00019614472842969036,-0.00020216370745119658,-0.00020917421796170718,-0.00011527449867863859,-0.00011527449867863859,-0.00011527449867863859,-0.00014515012588963913,-0.00013019510713963706,-0.00012521010088963752,-0.00016718218941317448,-0.00011786212929867923,-0.00011786212929867923,-0.00011772414084669502,-0.00012658810417270558,-0.00013789215932871052,-0.00013138721092721337,-0.00012683541546621574,-0.00013673079033122565,-0.00012150561173423363,-0.00012335906454973358,-0.00012524242740273583,-0.00012709588021823925,-0.00012308440445123886,-0.00012894386327274437,-0.00012149979467724475,-0.00012438465903175447,-0.0002229527028582562,-0.00014762212455829773,-0.00014659071301929144,-0.00012589331436527879,-0.0001378216022707955,-0.00013767205208329789,-0.00013154340292428207,-0.00015257369002878718,-0.0001525961912862972,-0.00016257617379879588,-0.00015758119753629674,-0.00014452048116129698,-0.00014452048116129698,-0.00012064811828078198,-0.00011763620499628119,-0.00012561830697079696,-0.00010863778396028034,-0.00011552865432079562,-0.00009760257184579513,-0.00009475017876129851,-0.00010380869478982327,-0.0001037488747148256,-0.00010280719328831928,-0.00011368641594481158,-0.00009679818427931267,-0.00011150748345881492,-0.00011468791744631557,-0.00011068191144031,-0.0001076774069358015,-0.00011869392345232113,-0.00016354900968982428,-0.00016438621582229307,-0.00009079049207578321,-0.0001465746510322767,-0.00013156722098727272,-0.0001285926265202665,-0.00011859270398276514,-0.0000827260687687667,-0.00007275605626876763,-0.0000827260687687667,-0.0000827260687687667,-0.00006284586384376623,-0.00014251623373126576,-0.0001345267229767612,-0.0001375087262237562,-0.00013535617303325753,-0.00014227695343126123,-0.00013016920530074458,-0.00012610337921974482,-0.00012549070820573952,-0.00017229638615123485,-0.00013653713475975798,-0.00011951160923423174,-0.00015211250822128042,-0.00014510199771076981,-0.00017722351134523417,-0.00017518062829222428,-0.00018112981722624016,-0.00017398422679222592,-0.00016896674927221675,-0.00016798518779571545,-0.0001659821847927144,-0.00015408927668569827,-0.00015208627368269376,-0.0001483021691841939,-0.00014930914044669966,-0.00011651451350972244,-0.00012149211097972276,-0.00012252352251872906,-0.0001675910900863012,-0.00013854754654275825,-0.00010950400299921184,-0.0001570937811902033,-0.0001550907781871988,-0.00016352637827169586,-0.00016044211366719047,-0.00017136890007120667,-0.00013825724413167942,-0.00015236031156767513,-0.00015035730856467755,-0.00014835430556167303,-0.00016738283409020033,-0.00014334679805416348,-0.000151199637162161,-0.00014819513265765596,-0.00016513065315314907,-0.00014109461711711568,-0.0001400931156156117,-0.0001769686611111064,-0.0001769686611111064,-0.00018693867361110547,-0.00016673942828611052,-0.00011104957207206875,-0.00017118383992458658,-0.00015488833924808335,-0.00015488833924808335,-0.00017018233842308259,-0.0001773311846815645,-0.00015680521525904614,-0.00013873159399399246],
    //         time: ["2017-12-16 20:15:13","2017-12-16 20:15:31","2017-12-16 20:15:52","2017-12-16 20:16:10","2017-12-16 20:16:29","2017-12-16 20:16:47","2017-12-16 20:17:05","2017-12-16 20:17:23","2017-12-16 20:17:41","2017-12-16 20:17:59","2017-12-16 20:18:19","2017-12-16 20:18:37","2017-12-16 20:18:54","2017-12-16 20:19:12","2017-12-16 20:19:31","2017-12-16 20:19:49","2017-12-16 20:20:07","2017-12-16 20:20:24","2017-12-16 20:20:42","2017-12-16 20:21:01","2017-12-16 20:21:19","2017-12-16 20:21:37","2017-12-16 20:21:56","2017-12-16 20:22:14","2017-12-16 20:22:33","2017-12-16 20:22:53","2017-12-16 20:23:12","2017-12-16 20:23:30","2017-12-16 20:23:48","2017-12-16 20:24:06","2017-12-16 20:24:25","2017-12-16 20:24:44","2017-12-16 20:25:02","2017-12-16 20:25:20","2017-12-16 20:25:37","2017-12-16 20:25:55","2017-12-16 20:26:13","2017-12-16 20:26:32","2017-12-16 20:26:50","2017-12-16 20:27:07","2017-12-16 20:27:27","2017-12-16 20:27:44","2017-12-16 20:28:02","2017-12-16 20:28:20","2017-12-16 20:28:39","2017-12-16 20:28:58","2017-12-16 20:29:16","2017-12-16 20:29:35","2017-12-16 20:29:53","2017-12-16 20:30:12","2017-12-16 20:30:29","2017-12-16 20:30:47","2017-12-16 20:31:05","2017-12-16 20:31:24","2017-12-16 20:31:42","2017-12-16 20:32:00","2017-12-16 20:32:22","2017-12-16 20:32:40","2017-12-16 20:32:58","2017-12-16 20:33:18","2017-12-16 20:33:36","2017-12-16 20:33:54","2017-12-16 20:34:13","2017-12-16 20:34:32","2017-12-16 20:34:50","2017-12-16 20:35:09","2017-12-16 20:35:26","2017-12-16 20:35:44","2017-12-16 20:36:05","2017-12-16 20:36:23","2017-12-16 20:36:43","2017-12-16 20:37:01","2017-12-16 20:37:20","2017-12-16 20:37:39","2017-12-16 20:37:58","2017-12-16 20:38:16","2017-12-16 20:38:34","2017-12-16 20:38:53","2017-12-16 20:39:11","2017-12-16 20:39:30","2017-12-16 20:39:49","2017-12-16 20:40:08","2017-12-16 20:40:27","2017-12-16 20:40:48","2017-12-16 20:41:05","2017-12-16 20:41:25","2017-12-16 20:41:44","2017-12-16 20:42:02","2017-12-16 20:42:21","2017-12-16 20:42:39","2017-12-16 20:42:57","2017-12-16 20:43:15","2017-12-16 20:43:33","2017-12-16 20:43:54","2017-12-16 20:44:12","2017-12-16 20:44:30","2017-12-16 20:44:48","2017-12-16 20:45:07","2017-12-16 20:45:26","2017-12-16 20:45:45","2017-12-16 20:46:03","2017-12-16 20:46:21","2017-12-16 20:46:40","2017-12-16 20:47:01","2017-12-16 20:47:21","2017-12-16 20:47:41","2017-12-16 20:48:00","2017-12-16 20:48:18","2017-12-16 20:48:36","2017-12-16 20:48:54","2017-12-16 20:49:12","2017-12-16 20:49:31","2017-12-16 20:49:48","2017-12-16 20:50:07","2017-12-16 20:50:25","2017-12-16 20:50:42","2017-12-16 20:51:00","2017-12-16 20:51:18","2017-12-16 20:51:36","2017-12-16 20:51:54","2017-12-16 20:52:14","2017-12-16 20:52:32","2017-12-16 20:52:51","2017-12-16 20:53:08","2017-12-16 20:53:27","2017-12-16 20:53:45","2017-12-16 20:54:02","2017-12-16 20:54:23","2017-12-16 20:54:42","2017-12-16 20:55:01","2017-12-16 20:55:19","2017-12-16 20:55:38","2017-12-16 20:55:58","2017-12-16 20:56:16","2017-12-16 20:56:34","2017-12-16 20:56:52","2017-12-16 20:57:11","2017-12-16 20:57:29","2017-12-16 20:57:46","2017-12-16 20:58:06","2017-12-16 20:58:24","2017-12-16 20:58:43","2017-12-16 20:59:01","2017-12-16 20:59:19","2017-12-16 20:59:36","2017-12-16 20:59:54","2017-12-16 21:00:13","2017-12-16 21:00:31","2017-12-16 21:00:52","2017-12-16 21:01:10","2017-12-16 21:01:27","2017-12-16 21:01:48","2017-12-16 21:02:06","2017-12-16 21:02:23","2017-12-16 21:02:42","2017-12-16 21:03:00","2017-12-16 21:03:19","2017-12-16 21:03:39","2017-12-16 21:03:57","2017-12-16 21:04:16","2017-12-16 21:04:35","2017-12-16 21:04:55","2017-12-16 21:05:14","2017-12-16 21:05:33","2017-12-16 21:05:51","2017-12-16 21:06:10","2017-12-16 21:06:28","2017-12-16 21:06:46","2017-12-16 21:07:04","2017-12-16 21:07:22","2017-12-16 21:07:40","2017-12-16 21:08:01","2017-12-16 21:08:20","2017-12-16 21:08:39","2017-12-16 21:08:57","2017-12-16 21:09:14","2017-12-16 21:09:33","2017-12-16 21:09:52","2017-12-16 21:10:11","2017-12-16 21:10:29","2017-12-16 21:10:49","2017-12-16 21:11:07","2017-12-16 21:11:25","2017-12-16 21:11:43","2017-12-16 21:12:04","2017-12-16 21:12:23","2017-12-16 21:12:41","2017-12-16 21:13:00","2017-12-16 21:13:18","2017-12-16 21:13:36","2017-12-16 21:13:54","2017-12-16 21:14:13","2017-12-16 21:14:31"],
    //         name: 'hitbtc-poloniex'
    //     }
    // ])
})


module.exports = router;
